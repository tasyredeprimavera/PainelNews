<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="template.xhtml"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:po="http://primefaces.org/omega">
    <h:form id="pacientes-internados">
        <p:poll interval="60" listener="#{setorControl.init()}" 
                update="pacientes-internados" />
        <div class="row">
            <div class="col-xs-12">
                <p:messages id="messages" showDetail="true" autoUpdate="true"
                            closable="true" globalOnly="true" />
            </div>
            <div class="col-xs-12">
                <p:tabView value="#{setorControl.setores}" var="setor" >
                    <p:tab title="#{setor.ds_setor_atendimento}" >
                        <div class="row">
                            <div class="col-xs-12">
                                <p:dataGrid var="paciente" value="#{setor.pacientes}" 
                                            layout="grid" rows="10" emptyMessage="Não há pacientes no setor.">
                                    <p:chart type="line"
                                             model="#{chartViewPaciente.getAnimatedModel(paciente)}"
                                             style="min-width: 225px"
                                             responsive="true"/>
                                </p:dataGrid>
                                
                            </div>
                        </div>
                    </p:tab>
                </p:tabView>
            </div>
        </div>
    </h:form>
</ui:decorate>

